<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/problem.css">
    <script src="https://code.jquery.com/jquery-3.5.0.js"
        integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc=" crossorigin="anonymous"></script>
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://kit.fontawesome.com/26d2eb4962.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="main">
        <div class="problem_part">
            <div class="num_list">
                <div class="num" onclick="click_this(this)">1</div>
                <div class="num" onclick="click_this(this)">2</div>
                <div class="num" onclick="click_this(this)">3</div>
                <div class="num" onclick="click_this(this)">4</div>
                <div class="num" onclick="click_this(this)">5</div>
                <div class="num" onclick="click_this(this)">6</div>
                <div class="num" onclick="click_this(this)">7</div>
                <div class="num" onclick="click_this(this)">8</div>
                <div class="num" onclick="click_this(this)">9</div>
                <div class="num" onclick="click_this(this)">10</div>
            </div>
            <div class="question_part"></div>
        </div>
        <div class="note_part">
            <div style="height: 100%; width:30px; border-right: 1px solid rgb(241, 241, 241);">
                <div class="pencil tool_style" onclick="click_this_tool(this)">
                    <svg style="height: 100%;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                        height="24" style="fill: rgba(0, 0, 0, 1);transform: msFilter;">
                        <path
                            d="M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z">
                        </path>
                    </svg>
                </div>
                <div class="neon" onclick="click_this_tool(this)">
                    <i class="fas fa-highlighter" style="margin:auto"></i>
                </div>
                <div class="eraser" onclick="click_this_tool(this)">
                    <svg style="height:100%;" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform:msFilter">
                        <path
                            d="M12.48 3 7.73 7.75 3 12.59a2 2 0 0 0 0 2.82l4.3 4.3A1 1 0 0 0 8 20h12v-2h-7l7.22-7.22a2 2 0 0 0 0-2.83L15.31 3a2 2 0 0 0-2.83 0zM8.41 18l-4-4 4.75-4.84.74-.75 4.95 4.95-4.56 4.56-.07.08z">
                        </path>
                    </svg>
                </div>
                <div class="black tool_style" onclick="click_this_color(this)">
                    <div class="black_dot"></div>
                </div>
                <div class="red" onclick="click_this_color(this)">
                    <div class="red_dot"></div>
                </div>
                <div class="yellow" onclick="click_this_color(this)">
                    <div class="yellow_dot"></div>
                </div>
                <div class="blue" onclick="click_this_color(this)">
                    <div class="blue_dot"></div>
                </div>
                <div class="small tool_style" onclick="click_this_size(this)">
                    <div class="small_dot"></div>
                </div>
                <div class="medium" onclick="click_this_size(this)">
                    <div class="medium_dot"></div>
                </div>
                <div class="large" onclick="click_this_size(this)">
                    <div class="large_dot"></div>
                </div>
            </div>
            <div class="enabledrawing">
                <canvas id="canvas" style="border: 1px solid black;"></canvas>

            </div>
        </div>
    </div>
    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        canvas.width = $('#canvas').innerWidth();
        canvas.height = $('#canvas').innerHeight();

        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2.5;
        ctx.strokeStyle="##bfff00";

        window.onload = () => {
            document.getElementById('canvas').setAttribute('width', $('.enabledrawing').width())
            document.getElementById('canvas').setAttribute('height', $('.enabledrawing').height())
        }
        function click_this(a) {
            for (let i = 0; i < 10; i++) {
                document.querySelectorAll('.num')[i].classList.remove('num_style')
            }
            let value = a
            value.classList.add('num_style')
        }
        function click_this_tool(a) {
            document.querySelector('.pencil').classList.remove('tool_style')
            document.querySelector('.neon').classList.remove('tool_style')
            document.querySelector('.eraser').classList.remove('tool_style')
            let value = a;
            value.classList.add('tool_style')
            if (a == document.querySelector('.eraser')) {
                ctx.strokeStyle = '#ffffff'
                ctx.lineWidth = 50;
                ctx.globalAlpha = 1;
            }else if (a == document.querySelector('.pencil')) {
                ctx.strokeStyle = '#000'
                ctx.lineWidth = 2.5;
                ctx.globalAlpha = 1;
            }else if (a == document.querySelector('.neon')){
                ctx.strokeStyle="#bfff00";
                ctx.lineWidth= 10;
                ctx.globalAlpha = 0.04;
            }
        }
        function click_this_color(a) {
            document.querySelector('.black').classList.remove('tool_style')
            document.querySelector('.red').classList.remove('tool_style')
            document.querySelector('.blue').classList.remove('tool_style')
            document.querySelector('.yellow').classList.remove('tool_style')
            let value = a;
            value.classList.add('tool_style')
            if (a == document.querySelector('.black')) {
                ctx.strokeStyle = '#000000'
            } else if (a == document.querySelector('.red')) {
                ctx.strokeStyle = '#ff0000'
            } else if (a == document.querySelector('.yellow')) {
                ctx.strokeStyle = '#ffff00'
            } else {
                ctx.strokeStyle = '#0067a3'
            }
        }
        function click_this_size(a) {
            document.querySelector('.small').classList.remove('tool_style')
            document.querySelector('.medium').classList.remove('tool_style')
            document.querySelector('.large').classList.remove('tool_style')
            let value = a;
            value.classList.add('tool_style')
            if (document.querySelector('.eraser').className.split(' ')[1]) {
                if (a == document.querySelector('.small')) {
                    ctx.lineWidth = 50;
                } else if (a == document.querySelector('.medium')) {
                    ctx.lineWidth = 100;
                } else if (a == document.querySelector('.large')) {
                    ctx.lineWidth = 150;
                }
            }else if(document.querySelector('.neon').className.split(' ')[1]){
                if (a == document.querySelector('.small')) {
                    ctx.lineWidth = 10;
                } else if (a == document.querySelector('.medium')) {
                    ctx.lineWidth = 15;
                } else if (a == document.querySelector('.large')) {
                    ctx.lineWidth = 20;
                }
            }else{
                if (a == document.querySelector('.small')) {
                    ctx.lineWidth = 2.5;
                } else if (a == document.querySelector('.medium')) {
                    ctx.lineWidth = 5;
                } else if (a == document.querySelector('.large')) {
                    ctx.lineWidth = 10;
                }
            }
        }

        let painting= false;

        function stopPainting(event) {
            painting = false;
        }

        function startPainting(event) {
            painting = true;
        }

        function onMouseMove(event) { //모든 움직임을 감지하고 line을 만든다.
            //스크린과 캠퍼스가 크기가 다른 경우 offsetX와 offsetY를 사용한다.
            console.log(event)
            const x = event.offsetX;
            const y = event.offsetY;
            if (!painting) {
                ctx.beginPath(); //path를 만듬
                ctx.moveTo(x, y); //x, y로 옮김
            } else {
                ctx.lineTo(x, y);
                ctx.stroke();
            }
        }

        function onMouseDown(event) {
            painting = true;
        }
        function onMouseMove_for_tab(event) { //모든 움직임을 감지하고 line을 만든다.
            //스크린과 캠퍼스가 크기가 다른 경우 offsetX와 offsetY를 사용한다.
            var bound = canvas.getBoundingClientRect();
            const x = event.offsetX
            const y = event.offsetY
            console.log(event)
            if (!painting) {
                ctx.beginPath(); //path를 만듬
                ctx.moveTo(x, y); //x, y로 옮김
                console.log('aa')
            } else {
                ctx.lineTo(x, y);
                ctx.stroke();
            }
        }



        if (canvas) {
            canvas.addEventListener("mousemove", onMouseMove);
            //캔버스 안에서의 움직임 감지
            canvas.addEventListener("mousedown", startPainting);
            //클릭했을때 발생하는 event
            canvas.addEventListener("mouseup", stopPainting);
            canvas.addEventListener("mouseleave", stopPainting);

            canvas.addEventListener("touchmove", onMouseMove_for_tab);
            //캔버스 안에서의 움직임 감지
            canvas.addEventListener("touchstart", startPainting);
            //클릭했을때 발생하는 event
            canvas.addEventListener("touchleave", stopPainting);
            canvas.addEventListener("touchend", stopPainting);
        }
    </script>
</body>

</html>